{% extends 'base.html' %}
{% load i18n tz superarchives %}

{% block main-content %}
  <div class="row">
    <div class="col-xs-6 col-sm-4 col-md-2 col-lg-2">
      <h2>{% block page_title %}{% trans "Groups"|title %}{% endblock %}</h2>
    </div>

    <div class="col-xs-6 col-sm-8 col-md-10 col-lg-10">
      <br/><br/>
      <p class="text-right quiet">
        {{ page_obj.paginator.count }} {% trans "messages found" %}
      </p>
    </div>
  </div>

  <hr/>

  <h3><b>{{ mailinglist.name|lower }} {% if mailinglist.description %}({{ mailinglist.description }}){% endif %}</b></h3>
  <div class="btn-group btn-group-sm">
    <a href="#" class="btn btn-default" disabled="disabled">{% blocktrans with number_of_users=mailinglist.get_number_of_users %}{{ number_of_users }} members{% endblocktrans %}</a>
  </div>
  <hr/>

  {% for result in message_list %}
    {% include 'search/thread_search_preview.html' %}
  {% endfor %}

  {% if page_obj.has_other_pages %}
    <div class="text-center">
      <ul class="pagination">
        <li {% if page_obj.number == 1 %}class="disabled"{% endif %}>
          <a href="{% if page_obj.number == 1 %}javascript:void(0);{% else %}?page={{1}}{% endif %}"><span class="glyphicon glyphicon-chevron-left small-icon"></span><span class="glyphicon glyphicon-chevron-left small-icon"></span></a>
        </li>
        <li {% if not page_obj.has_previous %}class="disabled"{% endif %}>
          <a href="{% if page_obj.has_previous %}?page={{page_obj.previous_page_number }}{% else %}javascript:void(0);{% endif %}"><span class="glyphicon glyphicon-chevron-left small-icon"></span></a>
        </li>

        {% if page_obj.has_previous %}
          {% if page_obj.previous_page_number > 1 %}
            <li>
              <a href="?page={{page_obj.previous_page_number|add:-1 }}">{{ page_obj.number|add:-2 }}</a>
            </li>
          {% endif %}
          <li>
            <a href="?page={{page_obj.previous_page_number }}">{{ page_obj.number|add:-1 }}</a>
          </li>
        {% endif %}

        <li class="active">
          <a href="javascript:void(0);">{{ page_obj.number }}</a>
        </li>

        {% if page_obj.has_next %}
          <li>
            <a href="?page={{page_obj.next_page_number }}">{{ page_obj.number|add:1 }}</a>
          </li>
          {% if page_obj.next_page_number < page_obj.paginator.num_pages %}
            <li>
              <a href="?page={{page_obj.next_page_number|add:1 }}">{{ page_obj.number|add:2 }}</a>
            </li>
          {% endif %}
        {% endif %}

        <li {% if not page_obj.has_next %}class="disabled"{% endif %}>
          <a href="{% if page_obj.has_next %}?page={{page_obj.next_page_number }}{% else %}javascript:void(0);{% endif %}"><span class="glyphicon glyphicon-chevron-right small-icon"></span></a>
        </li>

        <li {% if page_obj.number == page_obj.paginator.num_pages %}class="disabled"{% endif %}>
          <a href="{% if page_obj.number == page_obj.paginator.num_pages %}javascript:void(0);{% else %}?page={{page_obj.paginator.num_pages }}{% endif %}"><span class="glyphicon glyphicon-chevron-right small-icon"></span><span class="glyphicon glyphicon-chevron-right small-icon"></span></a>
        </li>

      </ul>
    </div>
  {% endif %}
{% endblock %}
